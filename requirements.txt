# ═══════════════════════════════════════════════════════════════════
# OCCUPANCY NETWORKS - REQUIREMENTS
# Проект: Генерация 3D моделей мебели из изображений
# Версия: 2.0
# ═══════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────
# DEEP LEARNING
# ─────────────────────────────────────────────────────────────────────
torch>=2.0.0
torchvision>=0.15.0

# ─────────────────────────────────────────────────────────────────────
# 3D GEOMETRY
# ─────────────────────────────────────────────────────────────────────
trimesh>=4.0.0           # Загрузка/сохранение мешей, сэмплирование
scikit-image>=0.21.0     # Marching Cubes для извлечения поверхности
rtree>=1.0.0             # Пространственные запросы (mesh.contains)
pyglet<2                 # Визуализация trimesh (опционально)
networkx>=3.0            # Графы для trimesh
manifold3d>=2.3.0        # Операции с мешами (опционально)

# ─────────────────────────────────────────────────────────────────────
# SCIENTIFIC COMPUTING
# ─────────────────────────────────────────────────────────────────────
numpy>=1.24.0,<2.0.0     # NumPy 1.x для совместимости
scipy>=1.10.0            # KDTree, пространственные операции

# ─────────────────────────────────────────────────────────────────────
# IMAGE PROCESSING
# ─────────────────────────────────────────────────────────────────────
Pillow>=9.5.0

# ─────────────────────────────────────────────────────────────────────
# GUI
# ─────────────────────────────────────────────────────────────────────
PyQt5>=5.15.0

# ─────────────────────────────────────────────────────────────────────
# UTILITIES
# ─────────────────────────────────────────────────────────────────────
tqdm>=4.65.0             # Прогресс-бары

# ─────────────────────────────────────────────────────────────────────
# OPTIONAL: Дополнительные функции
# ─────────────────────────────────────────────────────────────────────
# open3d>=0.17.0         # Продвинутая работа с 3D (реконструкция из точек)
# gradio>=4.0.0          # Веб-интерфейс (альтернатива PyQt5)


# ═══════════════════════════════════════════════════════════════════
# ИНСТРУКЦИЯ ПО УСТАНОВКЕ
# ═══════════════════════════════════════════════════════════════════
#
# ─────────────────────────────────────────────────────────────────────
# ДЛЯ RTX 5080/5090 (Blackwell, sm_120) - РЕКОМЕНДУЕТСЯ
# ─────────────────────────────────────────────────────────────────────
#
# RTX 50xx требует PyTorch nightly с поддержкой CUDA 12.8+
#
# 1. Создать окружение:
#    conda create -n occnet python=3.10 -y
#    conda activate occnet
#
# 2. Установить PyTorch NIGHTLY:
#    pip install --pre torch torchvision --index-url https://download.pytorch.org/whl/nightly/cu128
#
# 3. Системные зависимости (WSL/Linux):
#    sudo apt-get update
#    sudo apt-get install -y libspatialindex-dev build-essential libgl1-mesa-glx
#
# 4. Остальные зависимости:
#    pip install -r requirements.txt
#
# ─────────────────────────────────────────────────────────────────────
# ДЛЯ RTX 3000/4000 серии
# ─────────────────────────────────────────────────────────────────────
#
# 1. Создать окружение:
#    conda create -n occnet python=3.10 -y
#    conda activate occnet
#
# 2. Установить PyTorch с CUDA:
#    pip install torch torchvision --index-url https://download.pytorch.org/whl/cu121
#
# 3. Системные зависимости:
#    sudo apt-get update
#    sudo apt-get install -y libspatialindex-dev
#
# 4. Остальные зависимости:
#    pip install -r requirements.txt
#
# ─────────────────────────────────────────────────────────────────────
# ТОЛЬКО CPU
# ─────────────────────────────────────────────────────────────────────
#
# pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu
# pip install -r requirements.txt
#
#
# ═══════════════════════════════════════════════════════════════════
# ПРОВЕРКА УСТАНОВКИ
# ═══════════════════════════════════════════════════════════════════
#
# python -c "
# import torch
# import trimesh
# import rtree
# from skimage import measure
# import scipy
# print('='*50)
# print('✓ Все зависимости установлены!')
# print(f'PyTorch: {torch.__version__}')
# print(f'CUDA available: {torch.cuda.is_available()}')
# if torch.cuda.is_available():
#     print(f'GPU: {torch.cuda.get_device_name(0)}')
#     print(f'CUDA version: {torch.version.cuda}')
# print('='*50)
# "
#
#
# ═══════════════════════════════════════════════════════════════════
# ЗАПУСК
# ═══════════════════════════════════════════════════════════════════
#
# 1. Препроцессинг (опционально, но рекомендуется):
#    python preprocessing.py --root ./PIX3D_DATA --output ./cache/preprocessed
#
# 2. Обучение:
#    python train.py
#
# 3. Инференс:
#    python infer.py --image path/to/image.jpg --checkpoint ./checkpoints/best.pth
#
# 4. GUI:
#    python main.py
#
#
# ═══════════════════════════════════════════════════════════════════
# РЕШЕНИЕ ПРОБЛЕМ
# ═══════════════════════════════════════════════════════════════════
#
# Проблема: "CUDA capability sm_120 is not compatible"
# Решение: pip install --pre torch torchvision --index-url https://download.pytorch.org/whl/nightly/cu128
#
# Проблема: "No module named 'rtree'"
# Решение: sudo apt-get install libspatialindex-dev && pip install rtree
#
# Проблема: "libGL.so.1: cannot open shared object file"
# Решение: sudo apt-get install libgl1-mesa-glx libglib2.0-0
#
# Проблема: PyQt5 не запускается в WSL
# Решение: Нужен X server (VcXsrv) или WSLg
#
# ═══════════════════════════════════════════════════════════════════